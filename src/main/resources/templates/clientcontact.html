<!DOCTYPE html>
<html>
<head th:replace="fragments/header">
<meta charset="UTF-8"/>
</head>
<body>
	<div data-role="page" data-theme="a" data-dom-cache="false" >
		<div data-role="header" data-position="inline" >
			<img src="img/unimer_logo.png" class="logotitle" th:src="@{/img/unimer_logo.png}">
            <h1>
            SIP Cotizaciones - Contacto de cliente
            </h1>
		</div>
		<div data-role="content" data-theme="a" style="width: 80%;margin: 1em auto;">
		<h3>Control de contacto de clientes</h3>
			<div data-role="fieldcontain">
					
					<form method="post" action="#" th:action="@{/admin/addclientcontact}" th:object="${consecutive}" >
					
					<div  th:object="${updateClientContact}" >
						<label for="idClientContact">Id del contacto de cliente:</label>
						
						<div th:if="${updateClientContact==null}">
							<input  type="text" name="idClientContact" th:value="${consecutive != null ? consecutive.prefix + '- '+consecutive.subfix  : 'CLC-1'}" disabled/>
							<label for="client">Cliente:</label>
							<select name="client">
								<option th:each="client : ${clients}" th:value="${client.idClient}"><p th:text="${client.detail}"></p></option>
							</select>
							<label for="country">País:</label>
							<select name="country">
								<option th:each="country : ${countries}" th:value="${country.idCountry}"><p th:text="${country.detail}"></p></option>
							</select>
							<label for="name">Nombre:</label>
							<input title="Debe ingresar el nombre del contacto" maxlength="100" type="text" name="name" th:value="${name}" required/>
							<label for="phone">Teléfono:</label>
							<input title="Debe ingresar el número telefónico del contacto"  maxlength="15" type="number" name="phone" th:value="${phone}" required/>
							<label for="ext">Ext:</label>
							<input title="Debe ingresar ext del contacto"  maxlength="15" type="text" name="ext" th:value="${ext}" required/>
							<label for="email">Correo:</label>
							<input title="Debe ingresar el correo del cliente" maxlength="50" type="email" name="email" th:value="${email}" required/>
							<label for="clientType">Tipo de cliente</label>
							<label for="status"  title="Indica si el rol esta activo o inactivo">Estado</label>
							<select  name="status" data-role="slider"  th:value="${status}">
								<option value="0">Inactivo</option>
								<option value="1">Activo</option>
							</select>
						</div>
						
						<div th:if="${updateClientContact!=null}">
							<input type="text" name="idClientContact" th:value="${updateClientContact.idClientContact}" readonly />
							<label for="client">Cliente:</label>
							<select name="client">
								<option th:each="client : ${clients}" th:value="${client.idClient}" th:if="${updateClientContact.Client.detail == client.detail}"  selected readonly><p th:text="${client.detail}" ></p></option>
								<option th:each="client : ${clients}" th:value="${client.idClient}" th:if="${updateClientContact.Client.detail != client.detail}"   readonly><p th:text="${client.detail}" ></p></option>
							</select>
							<label for="country">País:</label>
							<select name="country">
								<option th:each="country : ${countries}" th:value="${country.idCountry}" th:if="${updateClientContact.Country.detail == country.detail}" selected readonly><p  th:text="${country.detail}"></p></option>
								<option th:each="country : ${countries}" th:value="${country.idCountry}" th:if="${updateClientContact.Country.detail != country.detail}" readonly><p  th:text="${country.detail}"></p></option>
							</select>
							<label for="name">Nombre:</label>
							<input title="Debe ingresar el nombre del contacto" maxlength="100" type="text" name="name" th:value="${updateClientContact.name}" required/>
							<label for="phone">Teléfono:</label>
							<input title="Debe ingresar el número telefónico del contacto"  maxlength="15" type="number" name="phone" th:value="${updateClientContact.phone}" required/>
							<label for="ext">Ext:</label>
							<input title="Debe ingresar ext del contacto"  maxlength="15" type="text" name="ext" th:value="${updateClientContact.ext}" required/>
							<label for="email">Correo:</label>
							<input title="Debe ingresar el correo del cliente" maxlength="50" type="email" name="email" th:value="${updateClientContact.email}" required/>
							<label for="status"  title="Indica si el rol esta activo o inactivo">Estado</label>
							<div  th:if="${updateClientContact.status==0}">
								<select  name="status" data-role="slider"  th:value="${status}">
									<option  value="0" selected>Inactivo </option>
									<option  value="1">Activo</option>
								</select>
							</div>
							<div  th:if="${updateClientContact.status==1}">
								<select  name="status" data-role="slider"  th:value="${status}">
									<option  value="0" >Inactivo </option>
									<option  value="1" selected>Activo</option>
								</select>
							</div>
							<a href="#" th:href="@{/admin/addclientcontact}"><button  class="custom_text" data-icon="Cancel">Cancelar</button></a>
							
						</div>
					
						
                    	<hr>
                    </div>
  					<input type="submit" name="submit" class="custom_text" data-icon="plus" value="Guardar">
                   
				</form>
			</div>
           	
           	
           	<fieldset data-role="controlgroup"  data-type="horizontal">
           	<legend><h3>Contactos de cliente en el sistema</h3></legend>
           		<table style="text-align:justify;">
           				<thead>
           				<tr>
           				<th  style="padding-right: 15px;">ID</th>
           				<th  style="padding-right: 15px;">Cliente</th>
           				<th  style="padding-right: 15px;">País</th>
           				<th  style="padding-right: 15px;">Nombre</th>
           				<th  style="padding-right: 15px;">Teléfono</th>
           				<th  style="padding-right: 15px;">Ext</th>
           				<th  style="padding-right: 15px;">Correo</th>
           				<th  style="padding-right: 15px;">Estado</th>
           				</tr>
           				</thead>
           				<tbody>
	           			<tr th:each="clientContact : ${clientContacts}">
							<td style="padding-right: 15px;" th:text="${clientContact.idClientContact}"></td>
							<td style="padding-right: 15px;" th:text="${clientContact.Client.detail}"></td>
							<td style="padding-right: 15px;" th:text="${clientContact.Country.detail}"></td>
							<td style="padding-right: 15px;" th:text="${clientContact.name}"></td>
							<td style="padding-right: 15px;" th:text="${clientContact.phone}"></td>
							<td style="padding-right: 15px;" th:text="${clientContact.ext}"></td>
							<td style="padding-right: 15px;" th:text="${clientContact.email}"></td>
							<td style="padding-right: 15px;" th:if="${clientContact.status==1}">Activo</td>
							<td style="padding-right: 15px;" th:if="${clientContact.status==0}">Inactivo</td>
	           				<td style="padding-right: 15px;"><a href="#" th:href="@{/admin/updateclientcontact?idClientContact=__${clientContact.idClientContact}__}"  >Editar</a></td>
	           				
           				</tr>
           				
          			</tbody>
           			</table>
           	</fieldset>
           	
		</div>
		<div id="footer" data-role="footer" data-position="fixed" data-tap-toggle="false">
			<div data-role="popup" data-position="left" id="adminmenu" th:replace="fragments/footer"></div>
		<!-- /panel -->	
		</div>
	</div>
</body>
</html>
